openapi: 3.0.3
info:
  title: API Clean Bajoqueta
  description: ""
  contact:
    email: pepegascobule@gmail.com
  version: 1.0.11
servers:
  - url: /
tags:
  - name: Mediciones
    description: Metodos para trabajar con las mediciones
  - name: User
    description: Metodo para trabajar con los usuarios
paths:
  /mediciones/guardar_mediciones:
    post:
      tags:
        - Mediciones
      summary: Añade un nueva medicion a la base de datos
      description: Añade un nueva medicion a la base de datos
      operationId: addMed
      requestBody:
        description: Añade un nueva medicion a la base de datos
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/setMedicion"
          application/xml:
            schema:
              $ref: "#/components/schemas/setMedicion"
          application/x-www-form-urlencoded:
            schema:
              $ref: "#/components/schemas/setMedicion"
        required: true
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/setMedicion"
            application/xml:
              schema:
                $ref: "#/components/schemas/setMedicion"
        "400":
          description: Invalid input
      x-swagger-router-controller: Mediciones
  /mediciones/recuperar_medicions/{limit}:
    get:
      tags:
        - Mediciones
      summary: Recoger mediciones guardadas
      description: Recoger mediciones guardadas
      operationId: getMed
      parameters:
        - name: email
          in: header
          required: true
          style: simple
          explode: false
          schema:
            type: string
            format: email
          example: email@email.com
        - name: limit
          in: path
          required: true
          style: simple
          explode: false
          schema:
            type: integer
          example: 100
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/getMedicion"
                x-content-type: application/json
            application/xml:
              schema:
                type: array
                xml:
                  name: medicion
                items:
                  $ref: "#/components/schemas/getMedicion"
        "400":
          description: Invalid status value
      x-swagger-router-controller: Mediciones
  /user/getUserByEmail:
    get:
      tags:
        - User
      summary: Comprobar si usuario existe
      description: Comprobar si usuario existe
      operationId: getUser
      parameters:
        - name: email
          in: header
          required: true
          style: simple
          explode: false
          schema:
            type: string
            format: email
      responses:
        "200":
          description: Se ha encontrado un registro
          content:
            applicaction/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/getUserByEmail"
                x-content-type: applicaction/json
            application/xml:
              schema:
                type: array
                xml:
                  name: user
                items:
                  $ref: "#/components/schemas/getUserByEmail"
        "400":
          description: Error al buscar usuarios. Contacte con un administrador
      x-swagger-router-controller: User
  /user/insertUser:
    post:
      tags:
        - User
      summary: Insertar nuevo usuario
      description: Añade un nuevo usuario a la base de datos
      operationId: insertUser
      requestBody:
        description: Añade un nuevo usuario a la base de datos
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/user"
          application/xml:
            schema:
              $ref: "#/components/schemas/user"
          application/x-www-form-urlencoded:
            schema:
              $ref: "#/components/schemas/user"
        required: true
      responses:
        "200":
          description: Usuario Insertado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/user"
            application/xml:
              schema:
                $ref: "#/components/schemas/user"
        "400":
          description: Error al insertar usuarios. Contacte con un administrador
      x-swagger-router-controller: User
  /user/updateUser:
    put:
      tags:
        - User
      summary: Actualizar un usuario ya creado
      description: Actualizar un usuario ya creado
      operationId: updateUser
      requestBody:
        description: Actualizar un usuario ya creado
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/newUser"
          application/xml:
            schema:
              $ref: "#/components/schemas/newUser"
          application/x-www-form-urlencoded:
            schema:
              $ref: "#/components/schemas/newUser"
        required: true
      responses:
        "200":
          description: Usuario actualizado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/newUser"
            application/xml:
              schema:
                $ref: "#/components/schemas/newUser"
        "400":
          description: Error al actualizar usuarios. Contacte con un administrador
      x-swagger-router-controller: User
  /user/deleteByEmail:
    delete:
      tags:
        - User
      summary: Eliminar usuario filtrado por ID
      description: Eliminar usuario filtrado por ID
      operationId: deleteUser
      parameters:
        - name: email
          in: header
          required: true
          style: simple
          explode: false
          schema:
            type: string
            format: email
      responses:
        "200":
          description: Se ha eliminado un registro
          content:
            applicaction/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/getUserByEmail"
                x-content-type: applicaction/json
            application/xml:
              schema:
                type: array
                xml:
                  name: user
                items:
                  $ref: "#/components/schemas/getUserByEmail"
        "400":
          description: Error al eliminar usuarios. Contacte con un administrador
      x-swagger-router-controller: User
components:
  schemas:
    setMedicion:
      required:
        - idContaminante
        - idSonda
        - emailUser
        - instante
        - latitud
        - longitud
        - valor
      type: object
      properties:
        id:
          type: integer
          example: 10
        idContaminante:
          type: integer
          example: 2
        idSonda:
          type: integer
          example: 5
        emailUser:
          type: string
          example: email@email.com
        instante:
          type: string
        valor:
          type: number
          format: float
        latitud:
          type: number
          format: float
        longitud:
          type: number
          format: float
        temperatura:
          type: number
          format: float
      example:
        idContaminante: 4
        idSonda: 5
        emailUser: email@email.com
        instante: 24/08/2023
        valor: 123
        latitud: 4
        longitud: 3
        temperatura: 20
      xml:
        name: medicion
    getMedicion:
      required:
        - email
        - limit
      type: object
      properties:
        id:
          type: integer
          example: 10
        idContaminante:
          type: integer
          example: 2
        instante:
          type: string
        valor:
          type: number
          format: float
        latitud:
          type: number
          format: float
        longitud:
          type: number
          format: float
        temperatura:
          type: number
          format: float
        email:
          type: number
          format: float
        limit:
          type: integer
          example: 50
      example:
        id: 10
        idContaminante: 4
        instante: 24/08/2023
        valor: 123
        latitud: 4
        longitud: 3
        temperatura: 20
      xml:
        name: medicion
    user:
      required:
        - contraseña
        - email
        - nombreApellido
        - telefono
        - imagen
      type: object
      properties:
        email:
          type: string
          format: email
        contraseña:
          type: string
          format: password
        nombreApellido:
          type: string
        telefono:
          type: string
        imagen:
          type: string
      example:
        email: email@email.com
        contraseña: esternocleidomastoideo
        nombreApellido: Jhon Doe
        telefono: "123456789"
        imagen: 'data:image/jpeg;base64,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'
    newUser:
      type: object
      properties:
        email:
          type: string
          format: email
        newEmail:
          type: string
          format: email
        contraseña:
          type: string
          format: password
        nombreApellido:
          type: string
        telefono:
          type: string
        imagen:
          type: string
      example:
        email: email@email.com
        newEmail: newEmail@email.com
        contraseña: newPass
        nombreApellido: New Jhon Doe
        telefono: "987654321"
        imagen: 'data:image/jpeg;base64,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'
    getUserByEmail:
      required:
        - email
      type: object
      properties:
        email:
          type: string
          format: email
      example:
        email: email@email.com
